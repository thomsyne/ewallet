<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header class="d-flex justify-content-between align-items-center">
        <strong>Transactions Table</strong> <small></small>
        <button cButton color="primary" (click)="toggleLiveDemo()">Transfer Funds</button>
      </c-card-header>
      <c-card-body>
        <p class="text-medium-emphasis small">
          This table shows list of transactions completed in recent times.
        </p>
        
          <table cTable>
            <thead>
            <tr>
              <th scope="col">Id</th>
              <th scope="col">Type</th>
              <th scope="col">Sender</th>
              <th scope="col">Receiver</th>
              <th scope="col">Amount</th>
              <th scope="col">Date</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let transaction of transactionList; let i = index">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ transaction.transaction_type }}</td>
              <td>{{ transaction.sender_name }}</td>
              <td>{{ transaction.receiver_name }}</td>
              <td>${{ transaction.amount }}</td>
              <td>{{ transaction.created_at | date: 'medium' }}</td>
            </tr>
            </tbody>
          </table>
        
      </c-card-body>
    </c-card>
  </c-col>
</c-row>


<c-modal size="lg" alignment="center" id="liveDemoModal" [visible]="modalVisible" (visibleChange)="handleLiveDemoChange($event)">
  <c-modal-header>
    <h5 cModalTitle>Transfer Funds</h5>
    <button (click)="toggleLiveDemo()" cButtonClose></button>
  </c-modal-header>
  <c-modal-body>

    <form [formGroup]="transactionForm" >

      <!-- <p>Choose Email or Wallet Number to get recipient details</p> -->
      <c-col xs="12">
        <c-card class="mb-4">
          <c-card-header>
            <strong>Choose Email or Wallet Number to get recipient details</strong>
          </c-card-header>
          <c-card-body class="d-flex gap-4">
              <div class="d-flex gap-1">
                  <input formControlName="radio" type="radio" value="email" />
                  <label>Email Address</label>
              </div>
              <div class="d-flex gap-1">
                  <input formControlName="radio" type="radio" value="wallet" />
                  <label>Wallet No</label>
              </div>
          </c-card-body>
        </c-card>
      </c-col>

      <c-row>
        <c-col [xs]>
          <label cLabel for="email">Email address</label>
          <input class="wallet-input" formControlName="email" aria-label="Email" cFormControl placeholder="Email Address" [readOnly]="transactionForm.value?.radio !== 'email'" />
        </c-col>
        <c-col [xs]>
          <label cLabel for="wallet">Wallet No</label>
          <input class="wallet-input" formControlName="wallet_id" aria-label="Wallet" cFormControl placeholder="Wallet No" [readOnly]="transactionForm.value?.radio !== 'wallet'"/>
        </c-col>
      </c-row>

      <c-row class="my-2" *ngIf="isWalletValid">
        <c-col [xs]>
          <label cLabel for="first_name">First Name</label>
          <input class="wallet-input" formControlName="first_name" aria-label="First name" cFormControl placeholder="First name" readonly/>
        </c-col>
        <c-col [xs]>
          <label cLabel for="last_name">Last Name</label>
          <input class="wallet-input" formControlName="last_name" aria-label="Last name" cFormControl placeholder="Last name" readonly/>
        </c-col>
      </c-row>

      <c-row class="my-2" *ngIf="isWalletValid">
        <c-col [xs]>
          <label cLabel for="amount">Amount</label>
          <input formControlName="amount" type="number" step="0.01" aria-label="Amount" cFormControl placeholder="Amount" />
        </c-col>
        <c-col [xs]>
          <label cLabel for="narration">Narration</label>
          <input formControlName="narration" aria-label="Narration" cFormControl placeholder="Narration" />
        </c-col>
      </c-row>
    </form>
  </c-modal-body>
  <c-modal-footer>
    <button (click)="resetModal()" cButton color="secondary">
      Reset
    </button>
    <button (click)="isWalletValid ? transferFunds() : fetchRecipientDetails()" cButton color="primary">{{btnText}}</button>
  </c-modal-footer>
</c-modal>